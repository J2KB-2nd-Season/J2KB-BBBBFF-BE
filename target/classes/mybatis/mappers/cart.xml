<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD MApper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.cart">
	<resultMap id="cartResult" type="cartVO">
		<result property="cartNum" column="cart_num" />
		<result property="cartQuan" column="cart_quan" />
		<result property="prodNum" column="prod_num" />
		<result property="memberId" column="MEMBER_ID" />
		<result property="cartDate" column="cart_date" />
	</resultMap>
	
	<resultMap id="productResult" type="productVO">
		<result property="prodNum" column="prod_num" />
		<result property="prodName" column="prod_name" />
		<result property="prodPrice" column="prod_price" />
		<result property="prodStock" column="prod_stock" />
		<result property="prodImage" column="prod_image" />
		<result property="prodDetail" column="prod_detail" />
		<result property="categoryNum" column="category_num" />
	</resultMap>
	
	<select id="selectCartList" resultMap = "cartResult">
		<![CDATA[
			SELECT * FROM cart
			WHERE MEMBER_ID = {#memberId}
		]]>
	</select>
	
	<select id="selectSumCartList" resultMap = "cartResult">
		<![CDATA[
			SELECT sum(cart_quan),member_id,prod_num,cart_date
			FROM cart
			WHERE MEMBER_ID = {#memberId}
			GROUP BY prod_num;
		]]>
	</select>
	
	
	<insert id="insertNewCart" parameterType="cartVO">
		<![CDATA[
			INSERT INTO cart(cart_num, cart_quan, prod_num, MEMBER_ID, cart_date) VALUES(#{cartNum},#{cartQuan},#{prodNum},#{memberId},#{cartDate})
		]]>
	</insert>
	
	<select id="selectCurrentCartNum" resultType="int">
		<![CDATA[
			SELECT IFNULL(MAX(cart_num),0) + 1
			FROM cart
		]]>
	</select>
	
	
</mapper>